library(tidyverse)
# reduce data to only include Scottish areas
lookup_s <- lookup %>% select(-"...5")
View(lookup_s)
lookup %>% group_by(nation) %>% tally()
# reduce data to only include Scottish areas
lookup_s <- lookup %>% select(-"...5") %>%
filter(nation == "Scotland")
# filter data to only include Scottish areas
data_s <- inner_join(data, lookup_s, by=("small_area"))
View(data_s)
# save Scottish dataframe as csv
read_csv(data_s, "data/data-scotland.csv")
# save Scottish dataframe as csv
write_csv(data_s, "data/data-scotland.csv")
unique_areas <- data_s %>% group_by(small_area) %>% tally()
unique_authorities <- data_s %>% group_by(local_authority) %>% tally()
unique_areas <- data_s %>% group_by(small_area) %>% tally() %>% n()
unique_areas <- data_s %>% group_by(small_area) %>% tally() %>% nrow()
unique_authorities <- data_s %>% group_by(local_authority) %>% tally() %>% nrow()
unique_authorities <- data_s %>% group_by(local_authority) %>% tally()
View(unique_authorities)
# summary statistics across local authorities
authority_data <- data_s %>% group_by(local_authority, co_benefit_type) %>%
summarise(mean = mean(sum))
glimpse(data_s)
# summary statistics across local authorities
authority_data <- data_s %>% group_by(local_authority, `co-benefit_type`) %>%
summarise(mean = mean(sum))
View(authority_data)
# summary statistics across local authorities
authority_data <- data_s %>% group_by(local_authority, `co-benefit_type`) %>%
summarise(mean = mean(sum)) %>% arrange(mean)
# summary statistics across local authorities
authority_data <- data_s %>% group_by(local_authority, `co-benefit_type`) %>%
summarise(mean = mean(sum)) %>% arrange(local_authority, mean)
# summary statistics across local authorities
authority_data <- data_s %>% group_by(local_authority, `co-benefit_type`) %>%
summarise(mean = mean(sum)) %>% arrange(local_authority, mean) %>%
slice(1:5)
# summary statistics across local authorities
authority_data <- data_s %>% group_by(local_authority, `co-benefit_type`) %>%
summarise(mean = mean(sum)) %>% arrange(local_authority, desc(mean)) %>%
slice(1:5)
# summary statistics across local authorities
authority_data <- data_s %>% group_by(local_authority, `co-benefit_type`) %>%
summarise(mean = mean(sum)) %>% ungroup() %>% arrange(local_authority, desc(mean)) %>%
slice(1:5)
# summary statistics across local authorities
authority_data <- data_s %>% group_by(local_authority, `co-benefit_type`) %>%
summarise(mean = mean(sum)) %>% ungroup()
# get top 5 co-benefits for each local authority
authority_data_top5 <- authority_data %>% group_by(local_authority, `co-benefit_type`) %>% arrange(desc(mean)) %>%
slice(1:5)
View(authority_data_top5)
# get top 5 co-benefits for each local authority
authority_data_top5 <- authority_data %>%
group_by(local_authority, `co-benefit_type`) %>%
arrange(desc(mean))
# get top 5 co-benefits for each local authority
authority_data_top5 <- authority_data %>%
group_by(`co-benefit_type`, local_authority) %>%
arrange(desc(mean))
# get top 5 co-benefits for each local authority
authority_data_top5 <- authority_data %>%
group_by(local_authority) %>%
arrange(desc(mean))
# get top 5 co-benefits for each local authority
authority_data_top5 <- authority_data %>%
group_by(`co-benefit_type`) %>%
arrange(local_authority, desc(mean))
# get top 5 co-benefits for each local authority
authority_data_top5 <- authority_data %>%
group_by(`co-benefit_type`) %>%
arrange(local_authority, desc(mean)) %>%
slice(1:5)
# get top 5 co-benefits for each local authority
authority_data_top5 <- authority_data %>%
group_by(`co-benefit_type`) %>%
arrange(local_authority, desc(mean)) %>%
ungroup() %>%
group_by(local_authority) %>%
slice(1:5)
# get top 5 co-benefits for each local authority
authority_data_top5 <- authority_data %>%
group_by(`co-benefit_type`) %>%
arrange(local_authority, desc(mean)) %>%
ungroup() %>%
group_by(local_authority) %>%
slice(1:5) %>%
ungroup()
# let's see which co-benefits made it into the top5 most commonly
authority_data_top5_ranked <- authority_data_top5 %>%
group_by(`co-benefit_type`) %>%
tally()
View(authority_data_top5_ranked)
# let's see which co-benefits made it into the top5 most commonly
authority_data_top5_ranked <- authority_data_top5 %>%
group_by(`co-benefit_type`) %>%
sum(mean)
# let's see which co-benefits made it into the top5 most commonly
authority_data_top5_ranked <- authority_data_top5 %>%
group_by(`co-benefit_type`) %>%
summarise(sum = sum(mean))
# let's see which co-benefits made it into the top5 most commonly
authority_data_top5_ranked <- authority_data_top5 %>%
group_by(`co-benefit_type`) %>%
summarise(sum = sum(mean)) %>% arrange(desc(sum))
# let's see the absolute numbers for the co-benefits
authority_data_top5_ranked <- authority_data_top5 %>%
group_by(`co-benefit_type`) %>%
summarise(sum = sum(mean)) %>% arrange(desc(sum))
# get bottom 5 co-benefits for each local authority
authority_data_bottom5 <- authority_data %>%
group_by(`co-benefit_type`) %>%
arrange(local_authority, asc(mean)) %>%
ungroup() %>%
group_by(local_authority) %>%
slice(1:5) %>%
ungroup()
# get bottom 5 co-benefits for each local authority
authority_data_bottom5 <- authority_data %>%
group_by(`co-benefit_type`) %>%
arrange(local_authority, mean) %>%
ungroup() %>%
group_by(local_authority) %>%
slice(1:5) %>%
ungroup()
View(authority_data_bottom5)
# let's see the absolute numbers for the co-costs
authority_data_bottom5_ranked <- authority_data_bottom5 %>%
group_by(`co-benefit_type`) %>%
summarise(sum = sum(mean)) %>% arrange(sum)
View(authority_data_bottom5_ranked)
# summary statistics across local authorities
authority_data <- data_s %>% group_by(local_authority, `co-benefit_type`) %>%
# weighted sum across small areas within a local authority
summarise(total_sum = sum(sum)) %>% ungroup()
View(authority_data)
ggplot(authority_data, aes(x=`co-benefit_type`, y=total_sum)) +
theme_classic()+
geom_col()+
facet_wrap(~local_authority, ncol=4)
ggplot(authority_data, aes(x=`co-benefit_type`, y=total_sum)) +
theme_minimal()+
geom_col()+
facet_wrap(~local_authority, ncol=4)
ggplot(authority_data, aes(x=`co-benefit_type`, y=total_sum, fill=`co-benefit_type`)) +
theme_minimal()+
geom_col()+
facet_wrap(~local_authority, ncol=4)
# summary statistics across local authorities
authority_data <- data_s %>% group_by(local_authority, `co-benefit_type`) %>%
# should this be the mean or the sum?
summarise(mean = mean(sum)) %>% ungroup()
ggplot(authority_data, aes(x=`co-benefit_type`, y=total_sum, fill=`co-benefit_type`)) +
theme_minimal()+
geom_col()+
facet_wrap(~local_authority, ncol=4)
ggplot(authority_data, aes(x=`co-benefit_type`, y=mean, fill=`co-benefit_type`)) +
theme_minimal()+
geom_col()+
facet_wrap(~local_authority, ncol=4)
# summary statistics across local authorities
authority_data <- data_s %>% group_by(local_authority, `co-benefit_type`) %>%
# weighted sum across small areas within a local authority
summarise(total_sum = sum(sum)) %>% ungroup()
View(lookup_s)
# combine this with population data and calculate benefit / cost per person
authority_data_weight <- left_join(authority_data, lookup_s, by=("local_authority"))
# combine this with population data and calculate benefit / cost per person
authority_data_weight <- inner_join(authority_data, lookup_s, by=("local_authority"))
# summary statistics across local authorities
authority_data <- data_s %>% group_by(local_authority, `co-benefit_type`) %>%
# weighted sum across small areas within a local authority
summarise(total_sum = sum(sum)) %>% ungroup() %>%
pivot_wider(id_cols =c(local_authority), names_from = `co-benefit_type`,
values_from = "total_sum")
View(authority_data)
?unique
# combine this with population data and calculate benefit / cost per person
look_up_sum <- lookup_s %>% distinct(local_authority, .keep_all = TRUE)
View(look_up_sum)
# combine this with population data and calculate benefit / cost per person
look_up_sum <- lookup_s %>% distinct(local_authority, .keep_all = TRUE) %>% select(2:4)
authority_data_weighted <- inner_join(authority_data, look_up_sum, by=c("local_authority"))
View(authority_data_weighted)
glimpse(authority_data_weighted)
authority_data_weighted <- inner_join(authority_data, look_up_sum, by=c("local_authority")) %>%
mutate(air_quality_w = air_quality/population,
congestion_w = congestion/population,
dampness_w = dampness/population,
diet_change_w = diet_change/population,
excess_cold_w = excess_cold/population,
excess_heat_w = excess_heat/population,
hassle_costs_w = hassle_costs/population,
noise_w = noise/population,
physical_activity_w = physical_activity/population,
road_repairs_w = road_repairs/population,
road_safety_w = road_safety/population)
authority_data_weighted %>% select(local_authority, air_quality_w:road_safety_w) %>%
pivot_longer(cols=c(-local_authority), names_to = co_benefit, values_to = sum_pop) %>%
ggplot(., aes(x= co_benefit, y=sum_pop, fill=`co-benefit_type`)) +
theme_minimal()+
geom_col()+
facet_wrap(~local_authority, ncol=4)
dat_viz <- authority_data_weighted %>% select(local_authority, air_quality_w:road_safety_w) %>%
pivot_longer(cols=c(-local_authority), names_to = co_benefit, values_to = sum_pop)
dat_viz <- authority_data_weighted %>% select(local_authority, air_quality_w:road_safety_w) %>%
pivot_longer(cols=c(-local_authority), names_to = "co_benefit", values_to = "sum_pop")
dat_viz <- authority_data_weighted %>% select(local_authority, air_quality_w:road_safety_w) %>%
pivot_longer(cols=c(-local_authority), names_to = "co_benefit", values_to = "sum_pop") %>%
ggplot(., aes(x= co_benefit, y=sum_pop, fill=`co-benefit_type`)) +
theme_minimal()+
geom_col()+
facet_wrap(~local_authority, ncol=4)
authority_data_weighted %>% select(local_authority, air_quality_w:road_safety_w) %>%
pivot_longer(cols=c(-local_authority), names_to = "co_benefit", values_to = "sum_pop") %>%
ggplot(., aes(x= co_benefit, y=sum_pop, fill=`co-benefit_type`)) +
theme_minimal()+
geom_col()+
facet_wrap(~local_authority, ncol=4)
authority_data_weighted %>% select(local_authority, air_quality_w:road_safety_w) %>%
pivot_longer(cols=c(-local_authority), names_to = "co_benefit", values_to = "sum_pop") %>%
ggplot(., aes(x= co_benefit, y=sum_pop, fill=co_benefit)) +
theme_minimal()+
geom_col()+
facet_wrap(~local_authority, ncol=4)
# Co-benefits / Costs per person
look_up_sum <- lookup_s %>% group_by(local_authority) %>% summarise(population=sum(population))
View(look_up_sum)
authority_data_weighted <- inner_join(authority_data, look_up_sum, by=c("local_authority")) %>%
mutate(air_quality_w = air_quality/population,
congestion_w = congestion/population,
dampness_w = dampness/population,
diet_change_w = diet_change/population,
excess_cold_w = excess_cold/population,
excess_heat_w = excess_heat/population,
hassle_costs_w = hassle_costs/population,
noise_w = noise/population,
physical_activity_w = physical_activity/population,
road_repairs_w = road_repairs/population,
road_safety_w = road_safety/population)
authority_data_weighted %>% select(local_authority, air_quality_w:road_safety_w) %>%
pivot_longer(cols=c(-local_authority), names_to = "co_benefit", values_to = "sum_pop") %>%
ggplot(., aes(x= co_benefit, y=sum_pop, fill=co_benefit)) +
theme_minimal()+
geom_col()+
facet_wrap(~local_authority, ncol=4)
# Co-benefits / Costs per household
look_up_sum <- lookup_s %>% group_by(local_authority) %>% summarise(household=sum(household))
authority_data_weighted <- inner_join(authority_data, look_up_sum, by=c("local_authority")) %>%
mutate(air_quality_w = air_quality/household,
congestion_w = congestion/household,
dampness_w = dampness/household,
diet_change_w = diet_change/household,
excess_cold_w = excess_cold/household,
excess_heat_w = excess_heat/household,
hassle_costs_w = hassle_costs/household,
noise_w = noise/household,
physical_activity_w = physical_activity/household,
road_repairs_w = road_repairs/household,
road_safety_w = road_safety/household)
View(lookup_s)
# Co-benefits / Costs per household
look_up_sum <- lookup_s %>% group_by(local_authority) %>% summarise(household=sum(households))
authority_data_weighted <- inner_join(authority_data, look_up_sum, by=c("local_authority")) %>%
mutate(air_quality_w = air_quality/household,
congestion_w = congestion/household,
dampness_w = dampness/household,
diet_change_w = diet_change/household,
excess_cold_w = excess_cold/household,
excess_heat_w = excess_heat/household,
hassle_costs_w = hassle_costs/household,
noise_w = noise/household,
physical_activity_w = physical_activity/household,
road_repairs_w = road_repairs/household,
road_safety_w = road_safety/household)
authority_data_weighted %>% select(local_authority, air_quality_w:road_safety_w) %>%
pivot_longer(cols=c(-local_authority), names_to = "co_benefit", values_to = "sum_pop") %>%
ggplot(., aes(x= co_benefit, y=sum_pop, fill=co_benefit)) +
theme_minimal()+
geom_col()+
facet_wrap(~local_authority, ncol=4)
look_up_sum <- lookup_s %>% group_by(local_authority) %>% summarise(population=sum(population))
authority_data_weighted <- inner_join(authority_data, look_up_sum, by=c("local_authority")) %>%
mutate(air_quality_w = air_quality/population,
congestion_w = congestion/population,
dampness_w = dampness/population,
diet_change_w = diet_change/population,
excess_cold_w = excess_cold/population,
excess_heat_w = excess_heat/population,
hassle_costs_w = hassle_costs/population,
noise_w = noise/population,
physical_activity_w = physical_activity/population,
road_repairs_w = road_repairs/population,
road_safety_w = road_safety/population)
authority_data_weighted %>% select(local_authority, air_quality_w:road_safety_w) %>%
pivot_longer(cols=c(-local_authority), names_to = "co_benefit", values_to = "sum_pop") %>%
ggplot(., aes(x= co_benefit, y=sum_pop, fill=co_benefit)) +
theme_minimal()+
geom_col()+
facet_wrap(~local_authority, ncol=4)
knitr::opts_chunk$set(echo = TRUE)
# set the workspace path to the directory containing this script
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
# clear the environment
rm(list=ls())
library(tidyverse)
data <- read_csv("data/data-scotland.csv")
View(data)
data <- read_csv("data/data-scotland.csv") %>%
select(-c(damage_pathway, damage_type, households, nation))
View(data)
glimpse(data)
data_comb <- data %>% group_by(small_area, `co-benefit_type`) %>%
mutate(`2025` = sum(`2025`))
View(data_comb)
View(data)
data_comb <- data %>% group_by(small_area, `co-benefit_type`) %>%
#mutate(across(),`2025` = sum(`2025`))
summarize_if(is.numeric, sum, na.rm=TRUE)
data_comb <- data %>% group_by(small_area, `co-benefit_type`) %>%
mutate(across(`2025`:`2050`),sum, na.rm=TRUE)
data_comb <- data %>% group_by(small_area, `co-benefit_type`) %>%
summarise(across(`2025`:`2050`),sum, na.rm=TRUE)
data_comb <- data %>% group_by(small_area, `co-benefit_type`) %>%
summarise(across(c(`2025`:`2050`)),sum, na.rm=TRUE)
data_comb <- data %>% group_by(small_area, `co-benefit_type`) %>%
summarize_if(is.numeric & !population, sum, na.rm=TRUE)
data_comb <- data %>% group_by(small_area, `co-benefit_type`) %>%
summarize(across(where(is.numeric) & !population, sum))
data_comb <- data %>% group_by(small_area, `co-benefit_type`, population) %>%
summarize(across(where(is.numeric) & !population, sum))
data_comb <- data %>% group_by(small_area, `co-benefit_type`, population) %>%
summarize(across(where(is.numeric), sum))
data_comb <- data %>% group_by(small_area, `co-benefit_type`, population, local_authority) %>%
summarize(across(where(is.numeric), sum))
data_comb <- data %>% group_by(local_authority, small_area, `co-benefit_type`, population) %>%
summarize(across(where(is.numeric), sum))
# combine co-benefits across all factors, grouped by local authority, small area, and population
data_benefit_sum <- data %>% group_by(local_authority, small_area, population) %>%
summarize(across(where(is.numeric), sum))
# combine co-benefits for each factor, grouped by local authority, small area, and population
data_benefit_factor <- data %>% group_by(local_authority, small_area, `co-benefit_type`, population) %>%
summarize(across(where(is.numeric), sum))
# combine co-benefits across all factors, grouped by local authority, small area, and population
data_benefit_sum <- data %>% group_by(local_authority, small_area, population) %>%
summarize(across(where(is.numeric), sum))
View(data_benefit_sum)
# combine co-benefits across all factors and across small areas, grouped by local authority
data_benefit_sum_authority <- data %>% group_by(local_authority, population) %>%
summarize(across(where(is.numeric), sum))
View(data_benefit_sum_authority)
# combine co-benefits across all factors and across small areas, grouped by local authority
data_benefit_sum_authority <- data %>% group_by(local_authority) %>%
summarize(across(where(is.numeric), sum))
# combine co-benefits across all factors and across small areas, grouped by local authority
data_benefit_sum_authority <- data %>% group_by(local_authority, small_area, population) %>%
summarize(across(where(is.numeric), sum))
# combine co-benefits across all factors and across small areas, grouped by local authority
data_benefit_sum_authority <- data %>% group_by(local_authority, small_area, population) %>%
summarize(across(where(is.numeric), sum)) %>% ungroup() %>%
group_by(local_authority) %>% summarize(across(where(is.numeric), sum))
dat_gla <- data_benefit_sum %>% filter(local_authority == "Glasgow City")
View(dat_gla)
is.na(dat_gla)
filter(is.na(dat_gla))
is.na(dat_gla)$TRUE
data_benefit_factor %>% filter(small_area == "S01010206")
data %>% filter(small_area == "S01010206")
# combine co-benefits across all factors and across small areas, grouped by local authority
data_benefit_sum_authority <- data %>% group_by(local_authority, small_area, population) %>%
summarize(across(where(is.numeric), sum)) %>% ungroup() %>%
group_by(local_authority) %>% summarize(across(where(is.numeric), sum, na.rm=TRUE))
# combine co-benefits across all factors and across small areas, grouped by local authority
data_benefit_sum_authority <- data %>% group_by(local_authority, small_area, population) %>%
summarize(across(where(is.numeric), \(x) sum(x, na.rm = TRUUE))) %>% ungroup() %>%
group_by(local_authority) %>% summarize(across(where(is.numeric), \(x) sum(x, na.rm = TRUUE)))
# combine co-benefits across all factors and across small areas, grouped by local authority
data_benefit_sum_authority <- data %>% group_by(local_authority, small_area, population) %>%
summarize(across(where(is.numeric), \(x) sum(x, na.rm = TRUE))) %>% ungroup() %>%
group_by(local_authority) %>% summarize(across(where(is.numeric), \(x) sum(x, na.rm = TRUE)))
# combine co-benefits for each factor, grouped by local authority, and small area
data_benefit_factor <- data %>% group_by(local_authority, small_area, `co-benefit_type`, population) %>%
summarize(across(where(is.numeric), \(x) sum(x, na.rm = TRUE)))
# combine co-benefits across all factors, grouped by local authority, and small area
data_benefit_sum <- data %>% group_by(local_authority, small_area, population) %>%
summarize(across(where(is.numeric), \(x) sum(x, na.rm = TRUE)))
# plot trajecotry of benefits for each local authority
data_benefit_authority_long <- data_benefit_sum_authority %>%
select(-c(population, sum)) %>%
```
# plot trajecotry of benefits for each local authority
data_benefit_authority_long <- data_benefit_sum_authority %>%
select(-c(population, sum)) %>%
pivot_longer(cols = -c(local_authority), names_to = "year", values_to = "benefits")
View(data_benefit_authority_long)
ggplot(data_benefit_authority_long, aes(x=year, y=benefits, group = local_authority)) +
theme_classic() +
geom_line()
ggplot(data_benefit_authority_long, aes(x=year, y=benefits, group = local_authority, fill = local_authority)) +
theme_classic() +
geom_line()
ggplot(data_benefit_authority_long, aes(x=year, y=benefits, group = local_authority, color = local_authority)) +
theme_classic() +
geom_line()
ggplot(data_benefit_authority_long, aes(x=year, y=benefits, group = local_authority, color = local_authority)) +
theme_classic() +
geom_line()
# plot trajectory of benefits for each local authority WEIGHTED BY POPULATION
data_benefit_authority_long <- data_benefit_sum_authority %>%
rowwise() %>% mutate(across(c(`2025`:`2050`), x/population)) %>%
select(-c(population, sum)) %>%
pivot_longer(cols = -c(local_authority), names_to = "year", values_to = "benefits")
# plot trajectory of benefits for each local authority WEIGHTED BY POPULATION
data_benefit_authority_long <- data_benefit_sum_authority %>%
rowwise() %>% mutate(across(c(`2025`:`2050`),  . / population))
# plot trajectory of benefits for each local authority WEIGHTED BY POPULATION
weight_pop <- function(x / population)
# plot trajectory of benefits for each local authority WEIGHTED BY POPULATION
weight_pop <- function(x) (x/ population)
data_benefit_authority_long <- data_benefit_sum_authority %>%
rowwise() %>% mutate(across(c(`2025`:`2050`),  weight_pop(.x)))
data_benefit_authority_long <- data_benefit_sum_authority %>%
rowwise() %>% mutate(across(c(`2025`:`2050`),  weight_pop(.)))
data_benefit_authority_long <- data_benefit_sum_authority %>%
rowwise() %>% mutate(across(c(`2025`:`2050`), .fns = ~./population))
data_benefit_authority_long_weighted <- data_benefit_sum_authority %>%
rowwise() %>% mutate(across(c(`2025`:`2050`), .fns = ~./population))
# plot trajectory of benefits for each local authority
data_benefit_authority_long <- data_benefit_sum_authority %>%
select(-c(population, sum)) %>%
pivot_longer(cols = -c(local_authority), names_to = "year", values_to = "benefits")
data_benefit_authority_long_weighted <- data_benefit_sum_authority %>%
rowwise() %>% mutate(across(c(`2025`:`2050`), .fns = ~./population))
View(data_benefit_sum_authority)
View(data_benefit_authority_long_weighted)
data_benefit_authority_long_weighted <- data_benefit_sum_authority %>%
rowwise() %>% mutate(across(c(`2025`:`2050`), .fns = ~./population)) %>%
select(-c(population, sum)) %>%
pivot_longer(cols = -c(local_authority), names_to = "year", values_to = "benefits")
ggplot(data_benefit_authority_long_weighted,
aes(x=year, y=benefits, group = local_authority, color = local_authority)) +
theme_classic() +
geom_line()
ggplot(data_benefit_authority_long_weighted,
aes(x=year, y=benefits, group = local_authority, color = local_authority)) +
theme_classic() +
geom_line() +
facet_wrap(~local_authority)
ggplot(data_benefit_authority_long_weighted,
aes(x=year, y=benefits, group = local_authority, color = local_authority)) +
theme_classic() +
geom_line() +
facet_wrap(~local_authority) +
theme(legend.position = "none")
# try to spot patterns in which local authorities have a spike in benefits, and which have a gradual increase
# rural / islands show spike > they would immediately benefit from net zero
# cities (Glasgow, Edinburgh, Dundee, Aberdeen, are very similar)
ggplot(data_benefit_authority_long_weighted,
aes(x=year, y=benefits, group = local_authority, color = local_authority)) +
theme_classic() +
geom_line() +
facet_wrap(~local_authority) +
theme(legend.position = "none",
axis.text.x = element_blank())
# try to spot patterns in which local authorities have a spike in benefits, and which have a gradual increase
# rural / islands show spike > they would immediately benefit from net zero
# cities (Glasgow, Edinburgh, Dundee, Aberdeen, are very similar)
ggplot(data_benefit_authority_long_weighted,
aes(x=year, y=benefits, group = local_authority, color = local_authority)) +
theme_light() +
geom_line() +
facet_wrap(~local_authority) +
theme(legend.position = "none",
axis.text.x = element_blank())
# try to spot patterns in which local authorities have a spike in benefits, and which have a gradual increase
# rural / islands show spike > they would immediately benefit from net zero
# cities (Glasgow, Edinburgh, Dundee, Aberdeen, are very similar)
ggplot(data_benefit_authority_long_weighted,
aes(x=year, y=benefits, group = local_authority, color = local_authority)) +
theme_minimal() +
geom_line() +
facet_wrap(~local_authority) +
theme(legend.position = "none",
axis.text.x = element_blank())
ggplot(data_benefit_authority_long, aes(x=year, y=benefits, group = local_authority, color = local_authority)) +
theme_minimal() +
geom_line()
# plot trajectory of benefits for each local authority WEIGHTED BY POPULATION
data_benefit_authority_long_weighted <- data_benefit_sum_authority %>%
rowwise() %>% mutate(across(c(`2025`:`2050`), .fns = ~./population)) %>%
select(-c(population, sum)) %>%
pivot_longer(cols = -c(local_authority), names_to = "year", values_to = "benefits")
ggplot(data_benefit_authority_long_weighted,
aes(x=year, y=benefits, group = local_authority, color = local_authority)) +
theme_minimal() +
geom_line()
# try to spot patterns in which local authorities have a spike in benefits, and which have a gradual increase
# rural / islands show spike > they would immediately benefit from net zero
# cities (Glasgow, Edinburgh, Dundee, Aberdeen, are very similar)
ggplot(data_benefit_authority_long_weighted,
aes(x=year, y=benefits, group = local_authority, color = local_authority)) +
theme_minimal() +
geom_line() +
facet_wrap(~local_authority) +
theme(legend.position = "none",
axis.text.x = element_blank())
45056/(sqrt(865))
44038/(sqrt(960))
1525/2
